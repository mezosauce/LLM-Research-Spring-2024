<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG with Context Menu</title>
    <style>
        svg {
            border: 1px solid black;
        }
        .menu {
            display: none;
            position: absolute;
            background: white;
            border: 1px solid black;
            padding: 5px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
        }
        .menu button {
            display: block;
            width: 100%;
            margin: 2px 0;
            padding: 5px;
            border: none;
            cursor: pointer;
            background: lightgray;
        }
        .menu button:hover {
            background: darkgray;
        }
    </style>
</head>
<body>

<svg width="400" height="300">
    <!-- IDLE State -->
    <ellipse id="idle" class="clickable" cx="200" cy="50" rx="40" ry="20" stroke="black" fill="white"/>
    <text x="185" y="55" font-size="12">IDLE</text>

    <!-- HAPPY_ANNIVERSARY_DETECTED State -->
    <ellipse id="happy" class="clickable" cx="200" cy="120" rx="120" ry="30" stroke="black" fill="white"/>
    <text x="130" y="125" font-size="12">HAPPY_ANNIVERSARY_DETECTED</text>

    <!-- TADA_RAINING State -->
    <ellipse id="tada" class="clickable" cx="200" cy="200" rx="80" ry="25" stroke="black" fill="white"/>
    <text x="160" y="205" font-size="12">TADA_RAINING</text>
</svg>

<!-- Context Menu -->
<div id="contextMenu" class="menu">
    <button onclick="alert('Edit option clicked!')">Edit</button>
    <button onclick="alert('Delete option clicked!')">Delete</button>
    <button onclick="closeMenu()">Close</button>
</div>

<script>
    let contextMenu = document.getElementById("contextMenu");

    document.querySelectorAll(".clickable").forEach(element => {
        element.addEventListener("click", function(event) {
            event.preventDefault();

            // Show menu at click position
            contextMenu.style.display = "block";
            contextMenu.style.left = event.pageX + "px";
            contextMenu.style.top = event.pageY + "px";

            // Store selected element
            contextMenu.dataset.targetId = event.target.id;
        });
    });

    // Close menu when clicking outside
    document.addEventListener("click", function(event) {
        if (!event.target.closest(".menu") && !event.target.closest(".clickable")) {
            closeMenu();
        }
    });

    function closeMenu() {
        contextMenu.style.display = "none";
    }
</script>

</body>
</html>
