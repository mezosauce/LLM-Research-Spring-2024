<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activity_2</title>
    <link rel="stylesheet" href="style.css">
</head>
<body> 
    <div class="Main">
        <div class="NL_desc">
            <div class="activity_2">
                <h2>Activity 2:</h2>
                <p>When variations of “Happy Anniversary” are used in Zoom Chat, a celebration of raining Tada emojis will rain down in the chat window.</p>
            </div>
        </div>
        <div class="Demonstration">
            <div id="TestGraph">
                <h2>Activity 2</h2>
                <svg viewBox="0 0 400 300" preserveAspectRatio="xMidYMid meet">
                    <g class="clickable" onmousedown="startDrag(event)" onmouseup="stopDrag()" onmousemove="drag(event)">
                        <ellipse id="idle" cx="200" cy="50" rx="40" ry="20" stroke="black" fill="white"/>
                        <text id="textIdle" x="185" y="55" font-size="12" ondblclick="editText(event)">IDLE</text>
                    </g>
                    <g class="clickable" onmousedown="startDrag(event)" onmouseup="stopDrag()" onmousemove="drag(event)">
                        <ellipse id="happy" cx="200" cy="150" rx="120" ry="30" stroke="black" fill="white"/>
                        <text id="textHappy" x="104" y="155" font-size="12" ondblclick="editText(event)">HAPPY_ANNIVERSARY_DETECTED</text>
                    </g>
                    <g class="clickable" onmousedown="startDrag(event)" onmouseup="stopDrag()" onmousemove="drag(event)">
                        <ellipse id="tada" cx="200" cy="245" rx="80" ry="25" stroke="black" fill="white"/>
                        <text id="textTada" x="160" y="250" font-size="12" ondblclick="editText(event)">TADA_RAINING</text>
                    </g>
                </svg>
            </div>
        </div>
    </div>
    <script>
        function editText(event) {
            let textElement = event.target;
            let input = document.createElement("textarea");
            input.value = textElement.textContent;
            input.style.position = "absolute";
            input.style.left = textElement.getAttribute("x") + "px";
            input.style.top = textElement.getAttribute("y") - 10 + "px";
            input.style.fontSize = textElement.getAttribute("font-size") + "px";
            input.style.width = "200px";
            input.style.height = "20px";
            
            input.addEventListener("blur", function() {
                textElement.textContent = input.value;
                document.body.removeChild(input);
            });
            
            document.body.appendChild(input);
            input.focus();
        }

        let selectedElement = null;
        let offsetX = 0, offsetY = 0;

        function startDrag(event) {
            selectedElement = event.target.closest("g");
            if (!selectedElement) return;
            let rect = selectedElement.getBoundingClientRect();
            offsetX = event.clientX - rect.left;
            offsetY = event.clientY - rect.top;
        }

        function drag(event) {
            if (!selectedElement) return;
            selectedElement.setAttribute("transform", `translate(${event.clientX - offsetX}, ${event.clientY - offsetY})`);
        }

        function stopDrag() {
            selectedElement = null;
        }
    </script>
</body>
</html>
